<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - Blockchain AI LMS</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="navbar-content">
            <a href="index.html" class="navbar-brand">Blockchain AI LMS</a>
            <div class="navbar-links">
                <a href="index.html" class="navbar-link">Home</a>
                <a href="login.html" class="navbar-link">Sign In</a>
            </div>
        </div>
    </nav>

    <!-- Register Form -->
    <section class="section" style="padding-top: 120px; min-height: calc(100vh - 80px);">
        <div class="container">
            <div class="form-container">
                <h2 class="text-center mb-md">Create Your Account</h2>
                <p class="text-center mb-lg" style="color: var(--text-secondary);">
                    Join the future of learning with blockchain-verified credentials
                </p>

                <!-- Alert Messages -->
                <div id="alert-container"></div>

                <form id="register-form">
                    <div class="form-group">
                        <label for="email" class="form-label">Email Address</label>
                        <input 
                            type="email" 
                            id="email" 
                            name="email" 
                            class="form-input" 
                            placeholder="you@example.com"
                            required
                            autocomplete="email"
                        >
                        <span class="form-error" id="email-error"></span>
                    </div>

                    <div class="form-group">
                        <label for="username" class="form-label">Username</label>
                        <input 
                            type="text" 
                            id="username" 
                            name="username" 
                            class="form-input" 
                            placeholder="Choose a username"
                            required
                            autocomplete="username"
                            minlength="3"
                            maxlength="30"
                        >
                        <span class="form-error" id="username-error"></span>
                        <small style="color: var(--text-muted); font-size: 0.85rem;">
                            3-30 characters, alphanumeric and underscores only
                        </small>
                    </div>

                    <div class="form-group">
                        <label for="password" class="form-label">Password</label>
                        <input 
                            type="password" 
                            id="password" 
                            name="password" 
                            class="form-input" 
                            placeholder="Create a strong password"
                            required
                            autocomplete="new-password"
                            minlength="8"
                        >
                        <span class="form-error" id="password-error"></span>
                        <small style="color: var(--text-muted); font-size: 0.85rem;">
                            Minimum 8 characters
                        </small>
                    </div>

                    <div class="form-group">
                        <label for="confirm-password" class="form-label">Confirm Password</label>
                        <input 
                            type="password" 
                            id="confirm-password" 
                            name="confirm-password" 
                            class="form-input" 
                            placeholder="Confirm your password"
                            required
                            autocomplete="new-password"
                        >
                        <span class="form-error" id="confirm-password-error"></span>
                    </div>

                    <div class="form-group">
                        <label style="display: flex; align-items: flex-start; cursor: pointer;">
                            <input type="checkbox" id="terms" required style="margin-right: 8px; margin-top: 4px;">
                            <span style="font-size: 0.9rem; color: var(--text-secondary);">
                                I agree to the 
                                <a href="#" style="color: var(--accent-primary);">Terms of Service</a> 
                                and 
                                <a href="#" style="color: var(--accent-primary);">Privacy Policy</a>
                            </span>
                        </label>
                        <span class="form-error" id="terms-error"></span>
                    </div>

                    <button type="submit" class="btn btn-primary" id="register-btn" style="width: 100%; margin-top: var(--spacing-md);">
                        Create Account
                    </button>
                </form>

                <p class="text-center mt-md" style="color: var(--text-secondary);">
                    Already have an account? 
                    <a href="login.html" style="color: var(--accent-primary);">Sign in here</a>
                </p>
            </div>
        </div>
    </section>

    <!-- Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script>
        // Check if already logged in
        if (window.utils && window.utils.isAuthenticated()) {
            window.utils.redirectTo('dashboard.html');
        }

        // Initialize register form
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('register-form');
            if (form && window.handleRegister) {
                form.addEventListener('submit', window.handleRegister);
            }

            // Real-time validation
            const password = document.getElementById('password');
            const confirmPassword = document.getElementById('confirm-password');
            const email = document.getElementById('email');
            const username = document.getElementById('username');

            // Email validation
            if (email) {
                email.addEventListener('blur', function() {
                    const errorEl = document.getElementById('email-error');
                    if (!window.utils.validateEmail(this.value)) {
                        window.utils.showError(errorEl, 'Please enter a valid email address');
                    } else {
                        window.utils.hideError(errorEl);
                    }
                });
            }

            // Username validation
            if (username) {
                username.addEventListener('input', function() {
                    const errorEl = document.getElementById('username-error');
                    if (this.value && !window.utils.validateUsername(this.value)) {
                        window.utils.showError(errorEl, 'Username must be 3-30 characters, alphanumeric and underscores only');
                    } else {
                        window.utils.hideError(errorEl);
                    }
                });
            }

            // Password confirmation validation
            if (confirmPassword && password) {
                confirmPassword.addEventListener('input', function() {
                    const errorEl = document.getElementById('confirm-password-error');
                    if (this.value && this.value !== password.value) {
                        window.utils.showError(errorEl, 'Passwords do not match');
                    } else {
                        window.utils.hideError(errorEl);
                    }
                });
            }
        });

        function showAlert(type, message) {
            const container = document.getElementById('alert-container');
            if (container) {
                container.innerHTML = `<div class="alert alert-${type}">${message}</div>`;
                setTimeout(() => {
                    container.innerHTML = '';
                }, 5000);
            }
        }
    </script>
</body>
</html>

